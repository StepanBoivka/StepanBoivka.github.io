# üõ†Ô∏è –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è PWA - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è Client ID

## üìã –û–ø–∏—Å –ø—Ä–æ–±–ª–µ–º–∏
–ü—Ä–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ñ PWA –¥–æ–¥–∞—Ç–∫—É "–ê–ì–†–û-–ü–†–û–°–¢–Ü–†" —è–∫ –¥–æ–º–∞—à–Ω—ñ–π –µ–∫—Ä–∞–Ω, –ø–∞—Ä–∞–º–µ—Ç—Ä `?id=client_id` –≤—Ç—Ä–∞—á–∞–≤—Å—è, —ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –∑–∞–≤–∂–¥–∏ –ø–æ—Ç—Ä–∞–ø–ª—è–ª–∏ –Ω–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –±–µ–∑ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∞.

## ‚úÖ –©–æ –±—É–ª–æ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. JavaScript —Ñ—É–Ω–∫—Ü—ñ—è `updateManifestLink()`
**–ü—Ä–æ–±–ª–µ–º–∞:** ReferenceError - —Ñ—É–Ω–∫—Ü—ñ—è `getClientId()` –≤–∏–∫–ª–∏–∫–∞–ª–∞—Å—è –¥–æ —ó—ó –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è.

**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–º—ñ–Ω–µ–Ω–æ –≤–∏–∫–ª–∏–∫ `getClientId()` –Ω–∞ –ø—Ä—è–º–∏–π –¥–æ—Å—Ç—É–ø –¥–æ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤:
```javascript
// –ó–∞–º—ñ—Å—Ç—å:
const clientId = getClientId();

// –¢–µ–ø–µ—Ä:
const urlParams = new URLSearchParams(window.location.search);
const clientId = urlParams.get('id');
```

### 2. Fallback –¥–ª—è PHP –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –Ø–∫—â–æ PHP —Å–∫—Ä–∏–ø—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π, –º–∞–Ω—ñ—Ñ–µ—Å—Ç –Ω–µ –æ–Ω–æ–≤–ª—é–≤–∞–≤—Å—è.

**–†—ñ—à–µ–Ω–Ω—è:** –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—ñ PHP —Å–∫—Ä–∏–ø—Ç–∞ –∑ fallback:
```javascript
fetch(dynamicManifestUrl)
    .then(response => {
        if (response.ok) {
            manifestLink.href = dynamicManifestUrl;
        } else {
            throw new Error(`HTTP ${response.status}`);
        }
    })
    .catch(error => {
        manifestLink.href = 'manifest.json'; // Fallback
    });
```

### 3. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–µ—à—É Service Worker
–í–µ—Ä—Å—ñ—è –∫–µ—à—É –æ–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ `agro-prostir-v3.1-manifest-fix` –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è PWA.

## üîß –§–∞–π–ª–∏ —è–∫—ñ –±—É–ª–∏ –∑–º—ñ–Ω–µ–Ω—ñ

1. **index.html** - –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è `updateManifestLink()`
2. **sw.js** - –æ–Ω–æ–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å—ñ—è –∫–µ—à—É
3. **dynamic_manifest.php** - –±–µ–∑ –∑–º—ñ–Ω (–ø—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ)
4. **manifest.json** - –±–µ–∑ –∑–º—ñ–Ω (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ fallback)

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–°—Ç–≤–æ—Ä–µ–Ω–æ —Ñ–∞–π–ª `test_manifest_fix.html` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:
- ‚úÖ –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è Client ID –∑ URL
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –º–∞–Ω—ñ—Ñ–µ—Å—Ç
- ‚úÖ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è PHP –¥–∏–Ω–∞–º—ñ—á–Ω–æ–≥–æ –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∞
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü—ñ—ó `updateManifestLink()`

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤:
```bash
php -S localhost:8080
# –í—ñ–¥–∫—Ä–∏—Ç–∏: http://localhost:8080/test_manifest_fix.html
```

## üì± –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä PWA –∫–æ—Ä–µ–∫—Ç–Ω–æ:
1. ‚úÖ –í–∏–∑–Ω–∞—á–∞—î Client ID –∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
2. ‚úÖ –î–∏–Ω–∞–º—ñ—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î –º–∞–Ω—ñ—Ñ–µ—Å—Ç –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º `start_url`
3. ‚úÖ –ó–±–µ—Ä—ñ–≥–∞—î Client ID –ø—Ä–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ñ –¥–æ–¥–∞—Ç–∫—É
4. ‚úÖ –ú–∞—î fallback –¥–æ —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ –º–∞–Ω—ñ—Ñ–µ—Å—Ç–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ
5. ‚úÖ –ü—Ä–∞—Ü—é—î —è–∫ –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø—ñ, —Ç–∞–∫ —ñ –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö

## üîÑ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–º–µ–Ω—ñ –∑ HTTPS
2. –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è PWA –Ω–∞ —Ä—ñ–∑–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–æ–±–æ—Ç—É –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ Client ID –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö

---
**–î–∞—Ç–∞ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è:** ${new Date().toLocaleString('uk-UA')}
**–¢–µ—Å—Ç–æ–≤–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ:** PHP 8+ —Å–µ—Ä–≤–µ—Ä –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –¥–∏–Ω–∞–º—ñ—á–Ω–∏—Ö –º–∞–Ω—ñ—Ñ–µ—Å—Ç—ñ–≤
